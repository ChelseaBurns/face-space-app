'use strict';

angular.module('face-space-app').controller('LoginCtrl', function ($rootScope, $scope, $location, API_URL) {
  var vm = this;

  vm.login = function () {
    var fb = new Firebase(API_URL);

    fb.authWithPassword({
      email: vm.email,
      password: vm.password
    }, function (err, authData) {
      if (err) {
        console.log('Error', err);
      } else {
        $rootScope.auth = authData;
        $location.path('/people');
        $scope.$apply();
      }
    });
  };

  vm.register = function () {
    var fb = new Firebase(API_URL);

    fb.createUser({
      email: vm.email,
      password: vm.password
    }, function (error, authData) {
      if (error) {
        console.log('Error creating user', error);
      } else {
        console.log('Successful creation', authData.uid);
        vm.login();
      }
    });
  };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hc3NldHMvYXV0aC9sb2dpbi5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBTyxDQUNMLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUV4QixVQUFVLENBQUMsV0FBVyxFQUFFLFVBQVUsVUFBVSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFO0FBQ3hFLE1BQUksRUFBRSxHQUFHLElBQUksQ0FBQzs7QUFFZCxJQUFFLENBQUMsS0FBSyxHQUFHLFlBQVk7QUFDckIsUUFBSSxFQUFFLEdBQUcsSUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7O0FBRS9CLE1BQUUsQ0FBQyxnQkFBZ0IsQ0FBQztBQUNsQixXQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUs7QUFDZixjQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVE7S0FDdEIsRUFBRSxVQUFVLEdBQUcsRUFBRSxRQUFRLEVBQUU7QUFDMUIsVUFBSSxHQUFHLEVBQUU7QUFDUCxlQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztPQUMzQixNQUFNO0FBQ0wsa0JBQVUsQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDO0FBQzNCLGlCQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzFCLGNBQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztPQUNqQjtLQUNGLENBQUMsQ0FBQztHQUVKLENBQUM7O0FBRUYsSUFBRSxDQUFDLFFBQVEsR0FBRyxZQUFZO0FBQ3pCLFFBQUksRUFBRSxHQUFHLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDOztBQUU5QixNQUFFLENBQUMsVUFBVSxDQUFFO0FBQ2QsV0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLO0FBQ2YsY0FBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRO0tBQ3JCLEVBQUUsVUFBVSxLQUFLLEVBQUUsUUFBUSxFQUFFO0FBQzdCLFVBQUksS0FBSyxFQUFFO0FBQ1QsZUFBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRSxLQUFLLENBQUMsQ0FBQztPQUMzQyxNQUFNO0FBQ0wsZUFBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDakQsVUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO09BQ1o7S0FDRixDQUFDLENBQUM7R0FFSixDQUFDO0NBQ0gsQ0FBQyxDQUFDIiwiZmlsZSI6InNyYy9hc3NldHMvYXV0aC9sb2dpbi5jb250cm9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhclxuXHQubW9kdWxlKCdmYWNlLXNwYWNlLWFwcCcpXG5cblx0LmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUsICRsb2NhdGlvbiwgQVBJX1VSTCkge1xuICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICB2bS5sb2dpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBmYiA9IG5ldyBGaXJlYmFzZShBUElfVVJMKTtcblxuICAgICAgZmIuYXV0aFdpdGhQYXNzd29yZCh7XG4gICAgICAgIGVtYWlsOiB2bS5lbWFpbCxcbiAgICAgICAgcGFzc3dvcmQ6IHZtLnBhc3N3b3JkXG4gICAgICB9LCBmdW5jdGlvbiAoZXJyLCBhdXRoRGF0YSkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yJywgZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLmF1dGggPSBhdXRoRGF0YTtcbiAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3Blb3BsZScpO1xuICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgdm0ucmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgIHZhciBmYiA9IG5ldyBGaXJlYmFzZShBUElfVVJMKTtcblxuICAgICAgZmIuY3JlYXRlVXNlciAoe1xuICAgICAgIGVtYWlsOiB2bS5lbWFpbCxcbiAgICAgICBwYXNzd29yZDogdm0ucGFzc3dvcmRcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvciwgYXV0aERhdGEpIHtcbiAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgY3JlYXRpbmcgdXNlclwiLCBlcnJvcik7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgIGNvbnNvbGUubG9nKFwiU3VjY2Vzc2Z1bCBjcmVhdGlvblwiLCBhdXRoRGF0YS51aWQpO1xuICAgICAgICAgdm0ubG9naW4oKTtcbiAgICAgICB9XG4gICAgIH0pO1xuXG4gICB9O1xuIH0pO1xuIl19
